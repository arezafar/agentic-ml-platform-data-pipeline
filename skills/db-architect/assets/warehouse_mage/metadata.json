{
    "name": "batch_load",
    "type": "batch",
    "description": "Load, transform, and export data to warehouse with validation",
    "uuid": "batch_load_pipeline",
    "blocks": [
        {
            "uuid": "load_source",
            "name": "load_source",
            "type": "data_loader",
            "language": "python",
            "downstream_blocks": [
                "clean_columns"
            ],
            "configuration": {
                "source_type": "file"
            }
        },
        {
            "uuid": "clean_columns",
            "name": "clean_columns",
            "type": "transformer",
            "language": "python",
            "upstream_blocks": [
                "load_source"
            ],
            "downstream_blocks": [
                "export_to_warehouse"
            ]
        },
        {
            "uuid": "export_to_warehouse",
            "name": "export_to_warehouse",
            "type": "data_exporter",
            "language": "python",
            "upstream_blocks": [
                "clean_columns"
            ],
            "downstream_blocks": [
                "test_integrity"
            ],
            "configuration": {
                "data_provider": "postgres",
                "data_provider_profile": "dev",
                "schema": "raw_layer",
                "table": "incoming_metrics",
                "use_raw_sql": false
            }
        },
        {
            "uuid": "test_integrity",
            "name": "test_integrity",
            "type": "test",
            "language": "python",
            "upstream_blocks": [
                "export_to_warehouse"
            ]
        }
    ],
    "variables": {
        "source_url": "https://s3.amazonaws.com/h2o-public-test-data/smalldata/iris/iris_wheader.csv"
    }
}