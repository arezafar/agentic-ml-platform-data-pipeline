# =============================================================================
# Pipeline Global Variables - JTBD Step 1: Define
# =============================================================================
# The "Planning Phase" - Establishes problem scope, target variables,
# success metrics, and resource constraints.
#
# These variables configure the entire ML pipeline behavior and are
# referenced by all downstream blocks.
# =============================================================================

# Project Identification
project_name: "agentic_ml_pipeline_v1"
project_version: "1.0.0"

# ---------------------------------------------------------------------------
# Problem Definition
# ---------------------------------------------------------------------------
# The agent reads these to determine training strategy
target_column: "target"
problem_type: "classification" # classification, regression, or auto-detect

# Primary evaluation metric (H2O AutoML will optimize for this)
# Classification: AUC, logloss, misclassification, mean_per_class_error
# Regression: RMSE, MAE, RMSLE, deviance
primary_metric: "AUC"

# Threshold for model acceptance (Monitor step)
performance_threshold: 0.80

# ---------------------------------------------------------------------------
# Resource Constraints
# ---------------------------------------------------------------------------
# Time budget for AutoML (seconds)
max_runtime_secs: 3600

# Maximum number of models to train
max_models: 20

# Reproducibility seed
seed: 42

# ---------------------------------------------------------------------------
# Data Configuration
# ---------------------------------------------------------------------------
# Source table for training data
training_table: "feature_store.training_features"

# Execution date variable (for parametric queries)
# Use {{ execution_date }} in Mage blocks
execution_date: "{{ ds }}"

# Minimum rows required before training (Confirm step)
min_row_count: 1000

# Maximum null percentage allowed in target
max_target_null_pct: 0.01

# ---------------------------------------------------------------------------
# H2O Configuration
# ---------------------------------------------------------------------------
h2o_cluster_url: "http://h2o-ai:54321"

# Memory cleanup before training
cleanup_on_start: true

# Cross-validation folds
nfolds: 5

# Algorithms to include (empty = all)
include_algos: []

# Algorithms to exclude
exclude_algos:
  - "StackedEnsemble" # Faster iteration during dev

# ---------------------------------------------------------------------------
# Deployment Configuration
# ---------------------------------------------------------------------------
# MOJO output path
mojo_output_dir: "/models/production"

# Model versioning
enable_versioning: true

# Comparison baseline (previous deployed model)
baseline_model_id: null

# ---------------------------------------------------------------------------
# Alerting & Monitoring
# ---------------------------------------------------------------------------
slack_webhook_url: "{{ env_var('SLACK_WEBHOOK_URL') }}"
alert_on_failure: true
alert_on_degradation: true
